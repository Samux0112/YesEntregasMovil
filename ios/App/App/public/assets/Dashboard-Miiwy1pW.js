import{s as w}from"./index-CuP97KHj.js";import{u as B,z as v,A as g,p as l,c as d,a as o,t as a,C as i,h as N,D as c,E as x,o as u,y as S}from"./index-Cutlcilw.js";const C={class:"grid grid-cols-12 gap-8"},I={class:"col-span-12 text-center"},M={class:"text-3xl font-bold"},U={class:"text-xl mt-4"},D={class:"text-primary font-semibold"},A={class:"text-xl mt-4"},L={class:"text-primary font-semibold"},V={class:"text-xl mt-4"},q={key:0},z={class:"text-xl mt-2"},H={class:"text-primary font-semibold"},R={class:"text-xl mt-2"},F={class:"text-primary font-semibold"},P={key:1},T={class:"text-xl mt-8"},G={class:"text-secondary font-semibold"},Q={__name:"Dashboard",setup(J){const b=S(),s=B();v(()=>{s.loadSession()});const y=g(()=>{var t;return((t=s.user)==null?void 0:t.Nombre)||"Invitado"}),_=g(()=>{var t;return((t=s.user)==null?void 0:t.Username)||"No existe la ruta"}),m=l(""),n=l(""),r=l(""),p=()=>{const t=new Date,e={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};m.value=t.toLocaleString("es-ES",e)},f=async()=>{try{const t=await x.post("https://calidad-yesentregas-api.yes.com.sv/etiquetas/",{param:"msg_bienvenida"});t.data&&t.data.length>0?n.value=t.data[0].valor:n.value="Mensaje no encontrado"}catch(t){console.error("Error al obtener el mensaje:",t),n.value="Error al cargar el mensaje de bienvenida"}},h=async()=>{try{const t=await x.post("https://calidad-yesentregas-api.yes.com.sv/etiquetas/",{param:"msg_info"});t.data&&t.data.length>0?r.value=t.data[0].valor:r.value="Mensaje no encontrado"}catch(t){console.error("Error al obtener el mensaje indicativo:",t),r.value="Error al cargar el mensaje indicativo"}},j=async()=>{try{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(t=>{s.location={latitude:t.coords.latitude,longitude:t.coords.longitude},console.log("Ubicaci贸n obtenida:",s.location)})}catch(t){console.error("Error al obtener la ubicaci贸n:",t)}},E=()=>{b.push("/clientes")};return v(()=>{p(),setInterval(p,1e3),f(),h(),j()}),(t,e)=>{const k=w;return u(),d("div",C,[o("div",I,[o("h1",M,a(n.value||"Cargando mensaje..."),1),e[6]||(e[6]=o("br",null,null,-1)),o("p",U,[e[0]||(e[0]=i(" Usuario: ")),o("span",D,a(y.value),1)]),o("p",A,[e[1]||(e[1]=i(" Ruta: ")),o("span",L,a(_.value),1)]),e[7]||(e[7]=o("br",null,null,-1)),o("p",V,a(r.value||"Cargando mensaje indicativo..."),1),e[8]||(e[8]=o("br",null,null,-1)),N(k,{label:"Iniciar entregas",class:"w-auto p-2 text-sm",onClick:E}),e[9]||(e[9]=o("br",null,null,-1)),e[10]||(e[10]=o("br",null,null,-1)),c(s).location?(u(),d("div",q,[e[4]||(e[4]=o("p",{class:"text-xl mt-4"}," Ubicaci贸n obtenida: ",-1)),o("p",z,[e[2]||(e[2]=i(" Latitud: ")),o("span",H,a(c(s).location.latitude),1)]),o("p",R,[e[3]||(e[3]=i(" Longitud: ")),o("span",F,a(c(s).location.longitude),1)])])):(u(),d("div",P,e[5]||(e[5]=[o("p",{class:"text-xl mt-4 text-red-500"}," No se pudo obtener la ubicaci贸n. ",-1)]))),o("p",T,[o("span",G,a(m.value),1)])])])}}};export{Q as default};
